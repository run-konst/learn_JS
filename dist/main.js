(()=>{"use strict";(()=>{let e=0;const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),r=e=>e<10?`0${e}`:e,c=()=>{const c=(t=>{const o=(new Date).getTime(),n=new Date("3 july 2021").getTime(),r=Math.floor(e%60),c=Math.floor(e/60%60),s=Math.floor(e/3600);return e=(n-o)/1e3,{seconds:r,minutes:c,hours:s,timeRemaining:e}})();c.timeRemaining>0?(t.textContent=r(c.hours),o.textContent=r(c.minutes),n.textContent=r(c.seconds)):(t.textContent="00",o.textContent="00",n.textContent="00")};c();const s=setInterval(c,1e3);e<0&&clearInterval(s)})(),(()=>{const e=document.querySelector("menu"),t=()=>{"translate(-100%)"!==e.style.transform&&e.style.transform?e.style.transform="translate(-100%)":e.style.transform="translate(0)"};window.addEventListener("click",(o=>{const n=o.target.closest("menu"),r=o.target.closest(".menu"),c=o.target.closest("menu a"),s=o.target.closest(".close-btn");r||s||c?t():"translate(0px)"!==e.style.transform||n||t()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),n=()=>{t.style.top=parseInt(t.style.top)-1+"%"};o.forEach((o=>o.addEventListener("click",(()=>{if(e.style.display="block",screen.availWidth>=768){t.style.top="100%";const e=setInterval(n,10);setTimeout((()=>clearInterval(e)),900)}})))),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),document.querySelectorAll('a[href*="#"]').forEach((e=>(e=>{"#"!==e.getAttribute("href")&&e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})(e))),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const n=e.target.closest(".service-header-tab");n&&t.forEach(((e,r)=>{var c;n===e&&(c=r,o.forEach(((e,o)=>{c===o?(e.classList.remove("d-none"),t[o].classList.add("active")):(e.classList.add("d-none"),t[o].classList.remove("active"))})))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-dots");(()=>{for(let e=0;e<t.length;e++){const e=document.createElement("li");e.classList.add("dot"),o.append(e)}})();const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let r,c=0;const s=()=>{t[c].classList.remove("portfolio-item-active"),n[c].classList.remove("dot-active")},a=()=>{c>=t.length&&(c=0),c<0&&(c=t.length-1),t[c].classList.add("portfolio-item-active"),n[c].classList.add("dot-active")},l=()=>{s(),c++,a()},i=(e=3e3)=>{r=setInterval(l,e)};e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".portfolio-btn, .dot")&&(s(),t.matches("#arrow-right")?c++:t.matches("#arrow-left")?c--:t.matches(".dot")&&n.forEach(((e,o)=>{e===t&&(c=o)})),a())})),e.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(r)})),e.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&i(2e3)})),i(2e3)})(),(()=>{const e=document.querySelectorAll(".command__photo");e.forEach((e=>{e.addEventListener("mouseenter",(()=>(e=>{e.dataset.oldImg=e.src,e.src=e.dataset.img})(e)))})),e.forEach((e=>{e.addEventListener("mouseleave",(()=>(e=>{e.src=e.dataset.oldImg})(e)))}))})(),(()=>{const e=document.querySelectorAll("input"),t=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),n=document.querySelector(".calc-day"),r=document.querySelectorAll('[placeholder="Ваше имя"]'),c=document.querySelectorAll(".form-email"),s=document.querySelectorAll(".form-phone"),a=document.getElementById("form2-message"),l=function(){this.value=this.value.replace(/[^\d]/g,"")},i=function(){this.value=this.value.replace(/[^а-яА-ЯёЁ\s]/g,"")},u=function(){this.value=this.value.replace(/[^a-zA-Z@_!~.'*-]/g,"")},d=function(){this.value=this.value.replace(/[^\d+]/g,"")},m=function(){let e=this.value=this.value.replace(/\s+/g," ");for(e=e.replace(/-+/g,"-");e.match(/^ /)||e.match(/^-/);)e=e.replace(/^ /,""),e=e.replace(/^-/,"");for(;e.match(/ $/)||e.match(/-$/);)e=e.replace(/ $/,""),e=e.replace(/-$/,"");this.value=e},v=function(){const e=(this.value=this.value.replace(/./g,(e=>e.toLowerCase()))).split(" "),t=[];e.forEach((e=>{e=e.replace(/./,(e=>e.toUpperCase())),t.push(e)})),this.value=t.join(" ")};t.addEventListener("input",l),o.addEventListener("input",l),n.addEventListener("input",l),r.forEach((e=>e.addEventListener("input",i))),c.forEach((e=>e.addEventListener("input",u))),s.forEach((e=>e.addEventListener("input",d))),a.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яА-ЯёЁ\d\s-.,!?]/g,"")})),e.forEach((e=>e.addEventListener("blur",m))),r.forEach((e=>e.addEventListener("blur",v)))})(),(e=>{let t,o;const n=document.querySelectorAll(".calc-item"),r=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),s=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),l=document.getElementById("total"),i=()=>{clearInterval(t),clearTimeout(o);let n=0,i=1,u=1;const d=r.options[r.selectedIndex].value,m=c.value;s.value&&(i+=(s.value-1)/10),a.value&&a.value<=5?u*=2:a.value&&a.value<=10&&(u*=1.5),d&&m?(n=Math.round(e*d*m*i*u),((e,n,r=1e3,c=10)=>{n.textContent=0,r%c!=0&&(c=20);const s=e/(r/c);let a=s;t=setInterval((()=>{n.textContent=Math.round(a),a+=s}),c),o=setTimeout((()=>{clearInterval(t)}),r)})(n,l,500)):l.textContent=0};n.forEach((e=>e.addEventListener("change",i)))})(50),(()=>{const e=document.createElement("div"),t=()=>{e.textContent=""},o=o=>{if(200!==o.status)throw new Error("Network status is not 200");e.classList.remove("sk-wave"),e.textContent="Ваша заявка отправлена",setTimeout(t,3e3)},n=o=>{e.classList.remove("sk-wave"),e.textContent="Что-то пошло не так",console.error(o),setTimeout(t,3e3)};document.addEventListener("submit",(t=>{t.preventDefault();const r=t.target;r.appendChild(e),e.classList.add("sk-wave","status-message"),e.innerHTML='\n            <div class="sk-rect sk-rect-1"></div>\n            <div class="sk-rect sk-rect-2"></div>\n            <div class="sk-rect sk-rect-3"></div>\n            <div class="sk-rect sk-rect-4"></div>\n            <div class="sk-rect sk-rect-5"></div>';const c=new FormData(r),s={},a=r.querySelectorAll("input");c.forEach(((e,t)=>{s[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(s).then(o).catch(n).finally((()=>(e=>{e.forEach((e=>e.value=""))})(a)))}))})()})();