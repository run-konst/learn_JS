(()=>{"use strict";(()=>{let e=0;const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),s=e=>e<10?`0${e}`:e,r=()=>{const r=(t=>{const n=(new Date).getTime(),o=new Date("3 july 2021").getTime(),s=Math.floor(e%60),r=Math.floor(e/60%60),c=Math.floor(e/3600);return e=(o-n)/1e3,{seconds:s,minutes:r,hours:c,timeRemaining:e}})();r.timeRemaining>0?(t.textContent=s(r.hours),n.textContent=s(r.minutes),o.textContent=s(r.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00")};r();const c=setInterval(r,1e3);e<0&&clearInterval(c)})(),(()=>{const e=document.querySelector("menu"),t=()=>{"translate(-100%)"!==e.style.transform&&e.style.transform?e.style.transform="translate(-100%)":e.style.transform="translate(0)"};window.addEventListener("click",(n=>{const o=n.target.closest("menu"),s=n.target.closest(".menu"),r=n.target.closest("menu a"),c=n.target.closest(".close-btn");s||c||r?t():"translate(0px)"!==e.style.transform||o||t()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),n=document.querySelectorAll(".popup-btn"),o=()=>{t.style.top=parseInt(t.style.top)-1+"%"};n.forEach((n=>n.addEventListener("click",(()=>{if(e.style.display="block",document.body.offsetWidth>=768){t.style.top="100%";const e=setInterval(o,10);setTimeout((()=>clearInterval(e)),900)}})))),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),document.querySelectorAll('a[href*="#"]').forEach((e=>(e=>{"#"!==e.getAttribute("href")&&e.addEventListener("click",(t=>{t.preventDefault();const n=e.getAttribute("href").substr(1);document.getElementById(n).scrollIntoView({behavior:"smooth",block:"start"})}))})(e))),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const o=e.target.closest(".service-header-tab");o&&t.forEach(((e,s)=>{var r;o===e&&(r=s,n.forEach(((e,n)=>{r===n?(e.classList.remove("d-none"),t[n].classList.add("active")):(e.classList.add("d-none"),t[n].classList.remove("active"))})))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots");(()=>{for(let e=0;e<t.length;e++){const e=document.createElement("li");e.classList.add("dot"),n.append(e)}})();const o=document.querySelectorAll(".dot");o[0].classList.add("dot-active");let s,r=0;const c=()=>{t[r].classList.remove("portfolio-item-active"),o[r].classList.remove("dot-active")},a=()=>{r>=t.length&&(r=0),r<0&&(r=t.length-1),t[r].classList.add("portfolio-item-active"),o[r].classList.add("dot-active")},l=()=>{c(),r++,a()},i=(e=3e3)=>{s=setInterval(l,e)};e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".portfolio-btn, .dot")&&(c(),t.matches("#arrow-right")?r++:t.matches("#arrow-left")?r--:t.matches(".dot")&&o.forEach(((e,n)=>{e===t&&(r=n)})),a())})),e.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&i(2e3)})),i(2e3)})(),(()=>{const e=document.querySelectorAll(".command__photo");e.forEach((e=>{e.addEventListener("mouseenter",(()=>(e=>{e.dataset.oldImg=e.src,e.src=e.dataset.img})(e)))})),e.forEach((e=>{e.addEventListener("mouseleave",(()=>(e=>{e.src=e.dataset.oldImg})(e)))}))})(),(()=>{const e=document.querySelectorAll("input"),t=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),o=document.querySelector(".calc-day"),s=document.querySelectorAll('[placeholder="Ваше имя"]'),r=document.querySelectorAll(".form-email"),c=document.querySelectorAll(".form-phone"),a=document.getElementById("form2-message"),l=function(){this.value=this.value.replace(/[^\d]/g,"")},i=function(){this.value=this.value.replace(/[^а-яА-ЯёЁ\s]/g,"")},d=function(){this.value=this.value.replace(/[^a-zA-Z@_!~.'*-]/g,"")},u=function(){this.value=this.value.replace(/[^\d+]/g,"");const e=document.createElement("div"),t=this.id.substr(0,5),n=document.getElementById(t).querySelector(".form-btn");e.classList.add("error-message"),this.value.match(/^7|^8/)&&this.value.length<=11?(n.disabled=!0,e.textContent="Не менее 11 символов",this.nextElementSibling?this.nextElementSibling.textContent="Не менее 11 символов":this.insertAdjacentElement("afterend",e)):this.value.match(/^\+/)&&this.value.length<=12?(n.disabled=!0,e.textContent="Не менее 12 символов",this.nextElementSibling?this.nextElementSibling.textContent="Не менее 12 символов":this.insertAdjacentElement("afterend",e)):this.nextElementSibling&&(this.nextElementSibling.remove(),n.disabled=!1)},m=function(){let e=this.value=this.value.replace(/\s+/g," ");for(e=e.replace(/-+/g,"-");e.match(/^ /)||e.match(/^-/);)e=e.replace(/^ /,""),e=e.replace(/^-/,"");for(;e.match(/ $/)||e.match(/-$/);)e=e.replace(/ $/,""),e=e.replace(/-$/,"");this.value=e},v=function(){const e=(this.value=this.value.replace(/./g,(e=>e.toLowerCase()))).split(" "),t=[];e.forEach((e=>{e=e.replace(/./,(e=>e.toUpperCase())),t.push(e)})),this.value=t.join(" ")};t.addEventListener("input",l),n.addEventListener("input",l),o.addEventListener("input",l),s.forEach((e=>e.addEventListener("input",i))),r.forEach((e=>e.addEventListener("input",d))),c.forEach((e=>e.addEventListener("input",u))),a.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яА-ЯёЁ\d\s-.,!?]/g,"")})),e.forEach((e=>e.addEventListener("blur",m))),s.forEach((e=>e.addEventListener("blur",v)))})(),(e=>{let t,n;const o=document.querySelectorAll(".calc-item"),s=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),l=document.getElementById("total"),i=()=>{clearInterval(t),clearTimeout(n);let o=0,i=1,d=1;const u=s.options[s.selectedIndex].value,m=r.value;c.value&&(i+=(c.value-1)/10),a.value&&a.value<=5?d*=2:a.value&&a.value<=10&&(d*=1.5),u&&m?(o=Math.round(e*u*m*i*d),((e,o,s=1e3,r=10)=>{o.textContent=0,s%r!=0&&(r=20);const c=e/(s/r);let a=c;t=setInterval((()=>{o.textContent=Math.round(a),a+=c}),r),n=setTimeout((()=>{clearInterval(t)}),s)})(o,l,500)):l.textContent=0};o.forEach((e=>e.addEventListener("change",i)))})(50),(()=>{const e=document.createElement("div"),t=()=>{e.textContent=""},n=n=>{if(200!==n.status)throw new Error("Network status is not 200");e.classList.remove("sk-wave"),e.textContent="Ваша заявка отправлена",setTimeout(t,3e3)},o=n=>{e.classList.remove("sk-wave"),e.textContent="Что-то пошло не так",console.error(n),setTimeout(t,3e3)};document.addEventListener("submit",(t=>{t.preventDefault();const s=t.target;s.appendChild(e),e.classList.add("sk-wave","status-message"),e.innerHTML='\n            <div class="sk-rect sk-rect-1"></div>\n            <div class="sk-rect sk-rect-2"></div>\n            <div class="sk-rect sk-rect-3"></div>\n            <div class="sk-rect sk-rect-4"></div>\n            <div class="sk-rect sk-rect-5"></div>';const r=new FormData(s),c={},a=s.querySelectorAll("input");r.forEach(((e,t)=>{c[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then(n).catch(o).finally((()=>(e=>{e.forEach((e=>e.value=""))})(a)))}))})()})();